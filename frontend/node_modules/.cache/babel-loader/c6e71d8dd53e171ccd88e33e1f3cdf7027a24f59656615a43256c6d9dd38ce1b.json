{"ast":null,"code":"import _objectSpread from\"C:/Users/bruno/OneDrive/\\xC1rea de Trabalho/InvestMoneyBots/Crm/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Fechamentos=()=>{const{makeRequest}=useAuth();const[fechamentos,setFechamentos]=useState([]);const[pacientes,setPacientes]=useState([]);const[consultores,setConsultores]=useState([]);const[clinicas,setClinicas]=useState([]);const[agendamentos,setAgendamentos]=useState([]);const[erro,setErro]=useState(null);const[carregando,setCarregando]=useState(true);const[filtroConsultor,setFiltroConsultor]=useState('');const[filtroClinica,setFiltroClinica]=useState('');const[filtroMes,setFiltroMes]=useState('');const[filtrosVisiveis,setFiltrosVisiveis]=useState(false);const[modalAberto,setModalAberto]=useState(false);const[fechamentoEditando,setFechamentoEditando]=useState(null);const[novoFechamento,setNovoFechamento]=useState({paciente_id:'',consultor_id:'',clinica_id:'',agendamento_id:'',valor_fechado:'',valor_formatado:'',data_fechamento:new Date().toISOString().split('T')[0],tipo_tratamento:'',forma_pagamento:'',observacoes:''});const[contratoSelecionado,setContratoSelecionado]=useState(null);const formasPagamento=['√Ä vista','Parcelado 2x','Parcelado 3x','Parcelado 4x','Parcelado 6x','Parcelado 12x','PIX','Boleto','Cart√£o de Cr√©dito','Cart√£o de D√©bito'];useEffect(()=>{carregarDados();},[]);const carregarDados=async()=>{try{setCarregando(true);setErro(null);const[fechamentosRes,pacientesRes,consultoresRes,clinicasRes,agendamentosRes]=await Promise.all([makeRequest('/fechamentos'),makeRequest('/pacientes'),makeRequest('/consultores'),makeRequest('/clinicas'),makeRequest('/agendamentos')]);// Verificar se todas as respostas foram bem-sucedidas\nif(!fechamentosRes.ok){throw new Error(\"Erro ao carregar fechamentos: \".concat(fechamentosRes.status,\" - Tabela 'fechamentos' n\\xE3o encontrada. Execute a migra\\xE7\\xE3o no Supabase.\"));}const fechamentosData=await fechamentosRes.json();const pacientesData=await pacientesRes.json();const consultoresData=await consultoresRes.json();const clinicasData=await clinicasRes.json();const agendamentosData=await agendamentosRes.json();// Garantir que sempre sejam arrays\nsetFechamentos(Array.isArray(fechamentosData)?fechamentosData:[]);setPacientes(Array.isArray(pacientesData)?pacientesData:[]);setConsultores(Array.isArray(consultoresData)?consultoresData:[]);setClinicas(Array.isArray(clinicasData)?clinicasData:[]);setAgendamentos(Array.isArray(agendamentosData)?agendamentosData:[]);setCarregando(false);}catch(error){console.error('Erro ao carregar dados:',error);setErro(error.message);setCarregando(false);// Em caso de erro, garantir arrays vazios\nsetFechamentos([]);setPacientes([]);setConsultores([]);setClinicas([]);setAgendamentos([]);}};const filtrarFechamentos=()=>{if(!Array.isArray(fechamentos)){return[];}return fechamentos.filter(fechamento=>{const consultorMatch=!filtroConsultor||fechamento.consultor_id===parseInt(filtroConsultor);const clinicaMatch=!filtroClinica||fechamento.clinica_id===parseInt(filtroClinica);let mesMatch=true;if(filtroMes){const dataFechamento=new Date(fechamento.data_fechamento);const[ano,mes]=filtroMes.split('-');mesMatch=dataFechamento.getFullYear()===parseInt(ano)&&dataFechamento.getMonth()===parseInt(mes)-1;}return consultorMatch&&clinicaMatch&&mesMatch;});};const calcularEstatisticas=()=>{const fechamentosFiltrados=filtrarFechamentos();const total=fechamentosFiltrados.length;const valorTotal=fechamentosFiltrados.reduce((acc,f)=>acc+parseFloat(f.valor_fechado||0),0);const ticketMedio=total>0?valorTotal/total:0;const hoje=new Date().toISOString().split('T')[0];const fechamentosHoje=fechamentosFiltrados.filter(f=>f.data_fechamento===hoje).length;const mesAtual=new Date();const fechamentosMes=fechamentosFiltrados.filter(f=>{const dataFechamento=new Date(f.data_fechamento);return dataFechamento.getMonth()===mesAtual.getMonth()&&dataFechamento.getFullYear()===mesAtual.getFullYear();}).length;return{total,valorTotal,ticketMedio,fechamentosHoje,fechamentosMes};};const contarFiltrosAtivos=()=>{let count=0;if(filtroConsultor)count++;if(filtroClinica)count++;if(filtroMes)count++;return count;};const limparFiltros=()=>{setFiltroConsultor('');setFiltroClinica('');setFiltroMes('');};const abrirModal=function(){let fechamento=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(fechamento){setFechamentoEditando(fechamento);// Formatar o valor para exibi√ß√£o\nconst valorFormatado=fechamento.valor_fechado?parseFloat(fechamento.valor_fechado).toLocaleString('pt-BR',{minimumFractionDigits:2,maximumFractionDigits:2}):'';setNovoFechamento(_objectSpread(_objectSpread({},fechamento),{},{valor_formatado:valorFormatado}));}else{setFechamentoEditando(null);setNovoFechamento({paciente_id:'',consultor_id:'',clinica_id:'',agendamento_id:'',valor_fechado:'',valor_formatado:'',data_fechamento:new Date().toISOString().split('T')[0],tipo_tratamento:'',forma_pagamento:'',observacoes:''});}setModalAberto(true);};const fecharModal=()=>{setModalAberto(false);setFechamentoEditando(null);setContratoSelecionado(null);setNovoFechamento({paciente_id:'',consultor_id:'',clinica_id:'',agendamento_id:'',valor_fechado:'',valor_formatado:'',data_fechamento:new Date().toISOString().split('T')[0],tipo_tratamento:'',forma_pagamento:'',observacoes:''});};const salvarFechamento=async()=>{try{// Validar campos obrigat√≥rios\nif(!novoFechamento.paciente_id){alert('Por favor, selecione um paciente!');return;}if(!novoFechamento.valor_fechado||parseFloat(novoFechamento.valor_fechado)<=0){alert('Por favor, informe um valor v√°lido!');return;}// Para novos fechamentos, validar se contrato foi selecionado\nif(!fechamentoEditando&&!contratoSelecionado){alert('Por favor, selecione o contrato em PDF!');return;}// Validar tipo de arquivo\nif(contratoSelecionado&&contratoSelecionado.type!=='application/pdf'){alert('Apenas arquivos PDF s√£o permitidos para o contrato!');return;}// Validar tamanho do arquivo (m√°ximo 10MB)\nif(contratoSelecionado&&contratoSelecionado.size>10*1024*1024){alert('O arquivo deve ter no m√°ximo 10MB!');return;}// Preparar FormData para envio com arquivo\nconst formData=new FormData();// Adicionar campos do fechamento\nformData.append('paciente_id',parseInt(novoFechamento.paciente_id));// S√≥ adicionar IDs se tiverem valor\nif(novoFechamento.consultor_id&&novoFechamento.consultor_id.trim()!==''){formData.append('consultor_id',parseInt(novoFechamento.consultor_id));}if(novoFechamento.clinica_id&&novoFechamento.clinica_id.trim()!==''){formData.append('clinica_id',parseInt(novoFechamento.clinica_id));}if(novoFechamento.agendamento_id&&novoFechamento.agendamento_id.trim()!==''){formData.append('agendamento_id',parseInt(novoFechamento.agendamento_id));}formData.append('valor_fechado',parseFloat(novoFechamento.valor_fechado));formData.append('data_fechamento',novoFechamento.data_fechamento);formData.append('tipo_tratamento',novoFechamento.tipo_tratamento||'');formData.append('forma_pagamento',novoFechamento.forma_pagamento||'');formData.append('observacoes',novoFechamento.observacoes||'');// Adicionar arquivo se selecionado\nif(contratoSelecionado){formData.append('contrato',contratoSelecionado);}console.log('Enviando dados com arquivo...');// Debug\n// Configurar URL base da API\nconst API_BASE_URL=process.env.REACT_APP_API_URL||(process.env.NODE_ENV==='production'?'https://seu-backend.vercel.app/api':'http://localhost:5000/api');// Enviar dados - usar fetch diretamente para FormData\nconst url=fechamentoEditando?\"\".concat(API_BASE_URL,\"/fechamentos/\").concat(fechamentoEditando.id):\"\".concat(API_BASE_URL,\"/fechamentos\");const token=localStorage.getItem('token');const response=await fetch(url,{method:fechamentoEditando?'PUT':'POST',headers:{'Authorization':\"Bearer \".concat(token)},body:formData});const result=await response.json();console.log('Resposta do servidor:',result);// Debug\nif(response.ok){carregarDados();fecharModal();alert(fechamentoEditando?'Fechamento atualizado!':\"Fechamento registrado com sucesso! Contrato: \".concat(result.contrato||'anexado'));}else{alert('Erro: '+(result.error||'Erro desconhecido'));}}catch(error){console.error('Erro ao salvar fechamento:',error);alert('Erro ao salvar: '+error.message);}};const excluirFechamento=async id=>{if(window.confirm('Deseja excluir este fechamento?')){try{const response=await makeRequest(\"/fechamentos/\".concat(id),{method:'DELETE'});if(response.ok){carregarDados();alert('Fechamento exclu√≠do!');}else{const data=await response.json();alert('Erro ao excluir: '+(data.error||'Erro desconhecido'));}}catch(error){console.error('Erro ao excluir fechamento:',error);alert('Erro ao excluir: '+error.message);}}};const formatarMoeda=valor=>{return new Intl.NumberFormat('pt-BR',{style:'currency',currency:'BRL'}).format(valor);};const formatarData=data=>{return new Date(data+'T00:00:00').toLocaleDateString('pt-BR');};// Fun√ß√£o para formatar valor como moeda durante a digita√ß√£o\nconst formatarValorInput=valor=>{// Remove tudo que n√£o √© n√∫mero\nconst numeros=valor.replace(/\\D/g,'');// Se n√£o h√° n√∫meros, retorna string vazia\nif(!numeros)return'';// Converte para n√∫mero com 2 casas decimais\nconst numero=parseFloat(numeros)/100;// Formata como moeda brasileira\nreturn numero.toLocaleString('pt-BR',{minimumFractionDigits:2,maximumFractionDigits:2});};// Fun√ß√£o para converter valor formatado para n√∫mero\nconst desformatarValor=valorFormatado=>{if(!valorFormatado)return'';return valorFormatado.replace(/\\./g,'').replace(',','.');};// Fun√ß√£o para lidar com mudan√ßa no campo de valor\nconst handleValorChange=e=>{const valorDigitado=e.target.value;const valorFormatado=formatarValorInput(valorDigitado);const valorNumerico=desformatarValor(valorFormatado);setNovoFechamento(_objectSpread(_objectSpread({},novoFechamento),{},{valor_fechado:valorNumerico,valor_formatado:valorFormatado}));};// Mostrar loading\nif(carregando){return/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',maxWidth:'1400px',margin:'0 auto'},children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'60px 20px',background:'white',borderRadius:'15px',boxShadow:'0 4px 20px rgba(0,0,0,0.08)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'20px'},children:\"\\u23F3\"}),/*#__PURE__*/_jsx(\"h2\",{style:{color:'#6b7280',fontWeight:'500'},children:\"Carregando dados...\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#9ca3af'},children:\"Aguarde enquanto buscamos as informa\\xE7\\xF5es\"})]})});}// Mostrar erro\nif(erro){return/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',maxWidth:'1400px',margin:'0 auto'},children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'60px 20px',background:'white',borderRadius:'15px',boxShadow:'0 4px 20px rgba(0,0,0,0.08)',border:'1px solid #fecaca'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'20px'},children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"h2\",{style:{color:'#dc2626',fontWeight:'600',marginBottom:'10px'},children:\"Erro ao carregar dados\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280',marginBottom:'20px'},children:erro}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fef2f2',border:'1px solid #fecaca',borderRadius:'8px',padding:'15px',marginBottom:'20px',textAlign:'left'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'#991b1b',fontSize:'16px',marginBottom:'10px'},children:\"\\uD83D\\uDCCB Como resolver:\"}),/*#__PURE__*/_jsxs(\"ol\",{style:{color:'#7f1d1d',fontSize:'14px',paddingLeft:'20px'},children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Acesse o \",/*#__PURE__*/_jsx(\"strong\",{children:\"Supabase\"}),\" (supabase.com)\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"V\\xE1 para \",/*#__PURE__*/_jsx(\"strong\",{children:\"SQL Editor\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Execute o arquivo: \",/*#__PURE__*/_jsx(\"code\",{children:\"backend/migrations/run_migrations.sql\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Certifique-se de que a tabela \",/*#__PURE__*/_jsx(\"strong\",{children:\"fechamentos\"}),\" foi criada\"]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:carregarDados,style:{background:'#3b82f6',color:'white',border:'none',padding:'12px 24px',borderRadius:'8px',cursor:'pointer',fontWeight:'500'},children:\"\\uD83D\\uDD04 Tentar Novamente\"})]})});}const fechamentosFiltrados=filtrarFechamentos();const stats=calcularEstatisticas();const filtrosAtivos=contarFiltrosAtivos();return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',maxWidth:'1400px',margin:'0 auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',borderRadius:'15px',padding:'30px',marginBottom:'30px',boxShadow:'0 8px 32px rgba(0,0,0,0.1)',color:'white'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'25px'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'28px',fontWeight:'600',margin:'0'},children:\"\\uD83D\\uDCB0 Fechamentos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>abrirModal(),style:{background:'rgba(255,255,255,0.2)',color:'white',border:'1px solid rgba(255,255,255,0.3)',padding:'12px 24px',borderRadius:'8px',cursor:'pointer',fontWeight:'500',transition:'all 0.3s ease'},children:\"\\u2795 Novo Fechamento\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))',gap:'20px',marginBottom:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255,255,255,0.15)',borderRadius:'12px',padding:'20px',textAlign:'center',backdropFilter:'blur(10px)',border:'1px solid rgba(255,255,255,0.2)'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'32px',fontWeight:'700',marginBottom:'5px',display:'block'},children:stats.total}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',opacity:'0.9',fontWeight:'500'},children:\"Total de Fechamentos\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255,255,255,0.15)',borderRadius:'12px',padding:'20px',textAlign:'center',backdropFilter:'blur(10px)',border:'1px solid rgba(255,255,255,0.2)'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'32px',fontWeight:'700',marginBottom:'5px',display:'block'},children:formatarMoeda(stats.valorTotal)}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',opacity:'0.9',fontWeight:'500'},children:\"Valor Total\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255,255,255,0.15)',borderRadius:'12px',padding:'20px',textAlign:'center',backdropFilter:'blur(10px)',border:'1px solid rgba(255,255,255,0.2)'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'32px',fontWeight:'700',marginBottom:'5px',display:'block'},children:formatarMoeda(stats.ticketMedio)}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',opacity:'0.9',fontWeight:'500'},children:\"Ticket M\\xE9dio\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255,255,255,0.15)',borderRadius:'12px',padding:'20px',textAlign:'center',backdropFilter:'blur(10px)',border:'1px solid rgba(255,255,255,0.2)'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'32px',fontWeight:'700',marginBottom:'5px',display:'block'},children:stats.fechamentosHoje}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',opacity:'0.9',fontWeight:'500'},children:\"Fechamentos Hoje\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255,255,255,0.15)',borderRadius:'12px',padding:'20px',textAlign:'center',backdropFilter:'blur(10px)',border:'1px solid rgba(255,255,255,0.2)'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'32px',fontWeight:'700',marginBottom:'5px',display:'block'},children:stats.fechamentosMes}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',opacity:'0.9',fontWeight:'500'},children:\"Fechamentos no M\\xEAs\"})]})]}),stats.fechamentosHoje>0&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255, 193, 7, 0.2)',border:'1px solid rgba(255, 193, 7, 0.4)',borderRadius:'8px',padding:'15px',textAlign:'center',color:'#fff3cd',fontWeight:'500'},children:[\"\\uD83C\\uDF89 Parab\\xE9ns! \",stats.fechamentosHoje,\" fechamento(s) realizado(s) hoje!\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gap:'20px'},children:fechamentosFiltrados.length===0?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'60px 20px',color:'#6b7280'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'64px',marginBottom:'20px',opacity:'0.5'},children:\"\\uD83D\\uDCB0\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Nenhum fechamento encontrado\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Registre seu primeiro fechamento para come\\xE7ar!\"})]}):fechamentosFiltrados.map(fechamento=>/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',padding:'20px',boxShadow:'0 4px 20px rgba(0,0,0,0.08)',border:'1px solid #e5e7eb',transition:'all 0.3s ease'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',marginBottom:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 5px 0',color:'#1f2937',fontSize:'18px',fontWeight:'600'},children:fechamento.paciente_nome}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'24px',fontWeight:'700',color:'#059669',margin:'0'},children:formatarMoeda(fechamento.valor_fechado)})]}),/*#__PURE__*/_jsx(\"div\",{style:{background:'#f3f4f6',color:'#374151',padding:'4px 12px',borderRadius:'20px',fontSize:'12px',fontWeight:'500'},children:formatarData(fechamento.data_fechamento)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))',gap:'10px',marginBottom:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px 0',borderBottom:'1px solid #f3f4f6'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#6b7280',fontWeight:'500',marginBottom:'2px'},children:\"Consultor\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#1f2937',fontWeight:'500'},children:fechamento.consultor_nome||'N√£o informado'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px 0',borderBottom:'1px solid #f3f4f6'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#6b7280',fontWeight:'500',marginBottom:'2px'},children:\"Cl\\xEDnica\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#1f2937',fontWeight:'500'},children:fechamento.clinica_nome||'N√£o informado'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px 0',borderBottom:'1px solid #f3f4f6'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#6b7280',fontWeight:'500',marginBottom:'2px'},children:\"Tipo de Tratamento\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#1f2937',fontWeight:'500'},children:fechamento.tipo_tratamento||'N√£o informado'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px 0',borderBottom:'1px solid #f3f4f6'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#6b7280',fontWeight:'500',marginBottom:'2px'},children:\"Forma de Pagamento\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#1f2937',fontWeight:'500'},children:fechamento.forma_pagamento||'N√£o informado'})]})]}),fechamento.observacoes&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px 0',borderBottom:'1px solid #f3f4f6'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#6b7280',fontWeight:'500',marginBottom:'2px'},children:\"Observa\\xE7\\xF5es\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#1f2937',fontWeight:'500'},children:fechamento.observacoes})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',justifyContent:'flex-end'},children:[fechamento.contrato_arquivo&&/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{try{const API_BASE_URL=process.env.REACT_APP_API_URL||(process.env.NODE_ENV==='production'?'https://seu-backend.vercel.app/api':'http://localhost:5000/api');const token=localStorage.getItem('token');const response=await fetch(\"\".concat(API_BASE_URL,\"/fechamentos/\").concat(fechamento.id,\"/contrato?token=\").concat(token));if(!response.ok){const errorData=await response.json();alert('Erro ao baixar contrato: '+(errorData.error||'Erro desconhecido'));return;}// Criar blob e fazer download\nconst blob=await response.blob();const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=fechamento.contrato_nome_original||'contrato.pdf';document.body.appendChild(a);a.click();window.URL.revokeObjectURL(url);document.body.removeChild(a);}catch(error){console.error('Erro ao baixar contrato:',error);alert('Erro ao baixar contrato: '+error.message);}},style:{padding:'8px 16px',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'12px',fontWeight:'500',transition:'all 0.3s ease',background:'#059669',color:'white'},title:\"Baixar contrato: \".concat(fechamento.contrato_nome_original||'contrato.pdf'),children:\"\\uD83D\\uDCC4 Contrato\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>abrirModal(fechamento),style:{padding:'8px 16px',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'12px',fontWeight:'500',transition:'all 0.3s ease',background:'#3b82f6',color:'white'},children:\"\\u270F\\uFE0F Editar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>excluirFechamento(fechamento.id),style:{padding:'8px 16px',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'12px',fontWeight:'500',transition:'all 0.3s ease',background:'#dc2626',color:'white'},children:\"\\uD83D\\uDDD1\\uFE0F Excluir\"})]})]},fechamento.id))}),modalAberto&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:'0',left:'0',right:'0',bottom:'0',background:'rgba(0,0,0,0.5)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:'1000'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'15px',padding:'30px',width:'90%',maxWidth:'600px',maxHeight:'90vh',overflowY:'auto',boxShadow:'0 20px 60px rgba(0,0,0,0.3)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'25px',paddingBottom:'15px',borderBottom:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:'24px',fontWeight:'600',color:'#1f2937',margin:'0'},children:fechamentoEditando?'Editar Fechamento':'Novo Fechamento'}),/*#__PURE__*/_jsx(\"button\",{onClick:fecharModal,style:{background:'none',border:'none',fontSize:'24px',cursor:'pointer',color:'#6b7280',width:'32px',height:'32px',display:'flex',alignItems:'center',justifyContent:'center',borderRadius:'6px',transition:'all 0.3s ease'},children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))',gap:'20px',marginBottom:'25px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'500',marginBottom:'5px',color:'#374151',display:'flex',alignItems:'center',gap:'5px'},children:\"\\uD83D\\uDC64 Paciente *\"}),/*#__PURE__*/_jsxs(\"select\",{value:novoFechamento.paciente_id,onChange:e=>setNovoFechamento(_objectSpread(_objectSpread({},novoFechamento),{},{paciente_id:e.target.value})),required:true,style:{padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px',transition:'all 0.3s ease'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecione um paciente\"}),pacientes.map(paciente=>/*#__PURE__*/_jsxs(\"option\",{value:paciente.id,children:[paciente.nome,\" - \",paciente.telefone]},paciente.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'500',marginBottom:'5px',color:'#374151',display:'flex',alignItems:'center',gap:'5px'},children:\"\\uD83D\\uDCB0 Valor Fechado *\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"span\",{style:{position:'absolute',left:'10px',top:'50%',transform:'translateY(-50%)',color:'#6b7280',fontSize:'14px',fontWeight:'500'},children:\"R$\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"0,00\",value:novoFechamento.valor_formatado||'',onChange:handleValorChange,required:true,style:{padding:'10px 10px 10px 35px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px',transition:'all 0.3s ease',width:'100%',boxSizing:'border-box'}})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'500',marginBottom:'5px',color:'#374151',display:'flex',alignItems:'center',gap:'5px'},children:\"\\uD83D\\uDC68\\u200D\\uD83D\\uDCBC Consultor\"}),/*#__PURE__*/_jsxs(\"select\",{value:novoFechamento.consultor_id||'',onChange:e=>setNovoFechamento(_objectSpread(_objectSpread({},novoFechamento),{},{consultor_id:e.target.value})),style:{padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px',transition:'all 0.3s ease'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecione um consultor\"}),consultores.map(consultor=>/*#__PURE__*/_jsx(\"option\",{value:consultor.id,children:consultor.nome},consultor.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'500',marginBottom:'5px',color:'#374151',display:'flex',alignItems:'center',gap:'5px'},children:\"\\uD83C\\uDFE5 Cl\\xEDnica\"}),/*#__PURE__*/_jsxs(\"select\",{value:novoFechamento.clinica_id||'',onChange:e=>setNovoFechamento(_objectSpread(_objectSpread({},novoFechamento),{},{clinica_id:e.target.value})),style:{padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px',transition:'all 0.3s ease'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecione uma cl\\xEDnica\"}),clinicas.map(clinica=>/*#__PURE__*/_jsx(\"option\",{value:clinica.id,children:clinica.nome},clinica.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'500',marginBottom:'5px',color:'#374151',display:'flex',alignItems:'center',gap:'5px'},children:\"\\uD83D\\uDCC5 Data do Fechamento\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:novoFechamento.data_fechamento||'',onChange:e=>setNovoFechamento(_objectSpread(_objectSpread({},novoFechamento),{},{data_fechamento:e.target.value})),style:{padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px',transition:'all 0.3s ease'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'500',marginBottom:'5px',color:'#374151',display:'flex',alignItems:'center',gap:'5px'},children:\"\\uD83E\\uDDB7 Tipo de Tratamento\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Ex: Implante, Ortodontia, Limpeza...\",value:novoFechamento.tipo_tratamento||'',onChange:e=>setNovoFechamento(_objectSpread(_objectSpread({},novoFechamento),{},{tipo_tratamento:e.target.value})),style:{padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px',transition:'all 0.3s ease'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'500',marginBottom:'5px',color:'#374151',display:'flex',alignItems:'center',gap:'5px'},children:\"\\uD83D\\uDCB3 Forma de Pagamento\"}),/*#__PURE__*/_jsxs(\"select\",{value:novoFechamento.forma_pagamento||'',onChange:e=>setNovoFechamento(_objectSpread(_objectSpread({},novoFechamento),{},{forma_pagamento:e.target.value})),style:{padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px',transition:'all 0.3s ease'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecione a forma de pagamento\"}),formasPagamento.map(forma=>/*#__PURE__*/_jsx(\"option\",{value:forma,children:forma},forma))]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gridColumn:'1 / -1'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontWeight:'500',marginBottom:'5px',color:'#374151',display:'flex',alignItems:'center',gap:'5px'},children:[\"\\uD83D\\uDCC4 Contrato (PDF) \",!fechamentoEditando&&/*#__PURE__*/_jsx(\"span\",{style:{color:'#dc2626'},children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{border:'2px dashed #d1d5db',borderRadius:'8px',padding:'20px',textAlign:'center',background:contratoSelecionado?'#f0fdf4':'#fafafa',borderColor:contratoSelecionado?'#10b981':'#d1d5db',transition:'all 0.3s ease',position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".pdf\",onChange:e=>setContratoSelecionado(e.target.files[0]),style:{position:'absolute',top:0,left:0,width:'100%',height:'100%',opacity:0,cursor:'pointer'}}),contratoSelecionado?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'10px'},children:\"\\uD83D\\uDCC4\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',fontWeight:'500',color:'#059669',marginBottom:'5px'},children:\"Arquivo selecionado:\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'13px',color:'#374151',wordBreak:'break-all'},children:contratoSelecionado.name}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#6b7280',marginTop:'5px'},children:[(contratoSelecionado.size/1024/1024).toFixed(2),\" MB\"]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'10px',opacity:'0.5'},children:\"\\uD83D\\uDCC4\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#6b7280',marginBottom:'5px'},children:\"Clique aqui ou arraste para adicionar o contrato\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af'},children:\"Apenas arquivos PDF \\u2022 M\\xE1ximo 10MB\"})]})]}),fechamentoEditando&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'10px',fontSize:'12px',color:'#6b7280',textAlign:'center'},children:\"\\uD83D\\uDCA1 Para edi\\xE7\\xF5es, o contrato \\xE9 opcional (manter\\xE1 o arquivo atual se n\\xE3o for alterado)\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gridColumn:'1 / -1'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'500',marginBottom:'5px',color:'#374151',display:'flex',alignItems:'center',gap:'5px'},children:\"\\uD83D\\uDCDD Observa\\xE7\\xF5es\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Informa\\xE7\\xF5es adicionais sobre o fechamento...\",value:novoFechamento.observacoes,onChange:e=>setNovoFechamento(_objectSpread(_objectSpread({},novoFechamento),{},{observacoes:e.target.value})),style:{padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px',minHeight:'80px',resize:'vertical',fontFamily:'inherit'}})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',justifyContent:'flex-end',paddingTop:'15px',borderTop:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:fecharModal,style:{padding:'12px 24px',border:'none',borderRadius:'8px',cursor:'pointer',fontWeight:'500',transition:'all 0.3s ease',background:'#6b7280',color:'white'},children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:salvarFechamento,style:{padding:'12px 24px',border:'none',borderRadius:'8px',cursor:'pointer',fontWeight:'500',transition:'all 0.3s ease',background:'#059669',color:'white'},children:fechamentoEditando?'Atualizar':'Salvar'})]})]})})]});};export default Fechamentos;","map":{"version":3,"names":["React","useState","useEffect","useAuth","jsx","_jsx","jsxs","_jsxs","Fechamentos","makeRequest","fechamentos","setFechamentos","pacientes","setPacientes","consultores","setConsultores","clinicas","setClinicas","agendamentos","setAgendamentos","erro","setErro","carregando","setCarregando","filtroConsultor","setFiltroConsultor","filtroClinica","setFiltroClinica","filtroMes","setFiltroMes","filtrosVisiveis","setFiltrosVisiveis","modalAberto","setModalAberto","fechamentoEditando","setFechamentoEditando","novoFechamento","setNovoFechamento","paciente_id","consultor_id","clinica_id","agendamento_id","valor_fechado","valor_formatado","data_fechamento","Date","toISOString","split","tipo_tratamento","forma_pagamento","observacoes","contratoSelecionado","setContratoSelecionado","formasPagamento","carregarDados","fechamentosRes","pacientesRes","consultoresRes","clinicasRes","agendamentosRes","Promise","all","ok","Error","concat","status","fechamentosData","json","pacientesData","consultoresData","clinicasData","agendamentosData","Array","isArray","error","console","message","filtrarFechamentos","filter","fechamento","consultorMatch","parseInt","clinicaMatch","mesMatch","dataFechamento","ano","mes","getFullYear","getMonth","calcularEstatisticas","fechamentosFiltrados","total","length","valorTotal","reduce","acc","f","parseFloat","ticketMedio","hoje","fechamentosHoje","mesAtual","fechamentosMes","contarFiltrosAtivos","count","limparFiltros","abrirModal","arguments","undefined","valorFormatado","toLocaleString","minimumFractionDigits","maximumFractionDigits","_objectSpread","fecharModal","salvarFechamento","alert","type","size","formData","FormData","append","trim","log","API_BASE_URL","process","env","REACT_APP_API_URL","NODE_ENV","url","id","token","localStorage","getItem","response","fetch","method","headers","body","result","contrato","excluirFechamento","window","confirm","data","formatarMoeda","valor","Intl","NumberFormat","style","currency","format","formatarData","toLocaleDateString","formatarValorInput","numeros","replace","numero","desformatarValor","handleValorChange","e","valorDigitado","target","value","valorNumerico","padding","maxWidth","margin","children","textAlign","background","borderRadius","boxShadow","fontSize","marginBottom","color","fontWeight","border","paddingLeft","onClick","cursor","stats","filtrosAtivos","display","justifyContent","alignItems","transition","gridTemplateColumns","gap","backdropFilter","opacity","map","paciente_nome","borderBottom","consultor_nome","clinica_nome","contrato_arquivo","errorData","blob","URL","createObjectURL","a","document","createElement","href","download","contrato_nome_original","appendChild","click","revokeObjectURL","removeChild","title","position","top","left","right","bottom","zIndex","width","maxHeight","overflowY","paddingBottom","height","flexDirection","onChange","required","paciente","nome","telefone","transform","placeholder","boxSizing","consultor","clinica","forma","gridColumn","borderColor","accept","files","wordBreak","name","marginTop","toFixed","minHeight","resize","fontFamily","paddingTop","borderTop"],"sources":["C:/Users/bruno/OneDrive/√Årea de Trabalho/InvestMoneyBots/Crm/frontend/src/components/Fechamentos.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst Fechamentos = () => {\n  const { makeRequest } = useAuth();\n  const [fechamentos, setFechamentos] = useState([]);\n  const [pacientes, setPacientes] = useState([]);\n  const [consultores, setConsultores] = useState([]);\n  const [clinicas, setClinicas] = useState([]);\n  const [agendamentos, setAgendamentos] = useState([]);\n  const [erro, setErro] = useState(null);\n  const [carregando, setCarregando] = useState(true);\n  const [filtroConsultor, setFiltroConsultor] = useState('');\n  const [filtroClinica, setFiltroClinica] = useState('');\n  const [filtroMes, setFiltroMes] = useState('');\n  const [filtrosVisiveis, setFiltrosVisiveis] = useState(false);\n  const [modalAberto, setModalAberto] = useState(false);\n  const [fechamentoEditando, setFechamentoEditando] = useState(null);\n  const [novoFechamento, setNovoFechamento] = useState({\n    paciente_id: '',\n    consultor_id: '',\n    clinica_id: '',\n    agendamento_id: '',\n    valor_fechado: '',\n    valor_formatado: '',\n    data_fechamento: new Date().toISOString().split('T')[0],\n    tipo_tratamento: '',\n    forma_pagamento: '',\n    observacoes: ''\n  });\n  const [contratoSelecionado, setContratoSelecionado] = useState(null);\n\n  const formasPagamento = [\n    '√Ä vista',\n    'Parcelado 2x',\n    'Parcelado 3x',\n    'Parcelado 4x',\n    'Parcelado 6x',\n    'Parcelado 12x',\n    'PIX',\n    'Boleto',\n    'Cart√£o de Cr√©dito',\n    'Cart√£o de D√©bito'\n  ];\n\n  useEffect(() => {\n    carregarDados();\n  }, []);\n\n  const carregarDados = async () => {\n    try {\n      setCarregando(true);\n      setErro(null);\n      \n      const [fechamentosRes, pacientesRes, consultoresRes, clinicasRes, agendamentosRes] = await Promise.all([\n        makeRequest('/fechamentos'),\n        makeRequest('/pacientes'),\n        makeRequest('/consultores'),\n        makeRequest('/clinicas'),\n        makeRequest('/agendamentos')\n      ]);\n\n      // Verificar se todas as respostas foram bem-sucedidas\n      if (!fechamentosRes.ok) {\n        throw new Error(`Erro ao carregar fechamentos: ${fechamentosRes.status} - Tabela 'fechamentos' n√£o encontrada. Execute a migra√ß√£o no Supabase.`);\n      }\n\n      const fechamentosData = await fechamentosRes.json();\n      const pacientesData = await pacientesRes.json();\n      const consultoresData = await consultoresRes.json();\n      const clinicasData = await clinicasRes.json();\n      const agendamentosData = await agendamentosRes.json();\n\n      // Garantir que sempre sejam arrays\n      setFechamentos(Array.isArray(fechamentosData) ? fechamentosData : []);\n      setPacientes(Array.isArray(pacientesData) ? pacientesData : []);\n      setConsultores(Array.isArray(consultoresData) ? consultoresData : []);\n      setClinicas(Array.isArray(clinicasData) ? clinicasData : []);\n      setAgendamentos(Array.isArray(agendamentosData) ? agendamentosData : []);\n      \n      setCarregando(false);\n    } catch (error) {\n      console.error('Erro ao carregar dados:', error);\n      setErro(error.message);\n      setCarregando(false);\n      \n      // Em caso de erro, garantir arrays vazios\n      setFechamentos([]);\n      setPacientes([]);\n      setConsultores([]);\n      setClinicas([]);\n      setAgendamentos([]);\n    }\n  };\n\n  const filtrarFechamentos = () => {\n    if (!Array.isArray(fechamentos)) {\n      return [];\n    }\n    return fechamentos.filter(fechamento => {\n      const consultorMatch = !filtroConsultor || fechamento.consultor_id === parseInt(filtroConsultor);\n      const clinicaMatch = !filtroClinica || fechamento.clinica_id === parseInt(filtroClinica);\n      \n      let mesMatch = true;\n      if (filtroMes) {\n        const dataFechamento = new Date(fechamento.data_fechamento);\n        const [ano, mes] = filtroMes.split('-');\n        mesMatch = dataFechamento.getFullYear() === parseInt(ano) && \n                   dataFechamento.getMonth() === parseInt(mes) - 1;\n      }\n\n      return consultorMatch && clinicaMatch && mesMatch;\n    });\n  };\n\n  const calcularEstatisticas = () => {\n    const fechamentosFiltrados = filtrarFechamentos();\n    const total = fechamentosFiltrados.length;\n    const valorTotal = fechamentosFiltrados.reduce((acc, f) => acc + parseFloat(f.valor_fechado || 0), 0);\n    const ticketMedio = total > 0 ? valorTotal / total : 0;\n    \n    const hoje = new Date().toISOString().split('T')[0];\n    const fechamentosHoje = fechamentosFiltrados.filter(f => f.data_fechamento === hoje).length;\n\n    const mesAtual = new Date();\n    const fechamentosMes = fechamentosFiltrados.filter(f => {\n      const dataFechamento = new Date(f.data_fechamento);\n      return dataFechamento.getMonth() === mesAtual.getMonth() && \n             dataFechamento.getFullYear() === mesAtual.getFullYear();\n    }).length;\n\n    return { total, valorTotal, ticketMedio, fechamentosHoje, fechamentosMes };\n  };\n\n  const contarFiltrosAtivos = () => {\n    let count = 0;\n    if (filtroConsultor) count++;\n    if (filtroClinica) count++;\n    if (filtroMes) count++;\n    return count;\n  };\n\n  const limparFiltros = () => {\n    setFiltroConsultor('');\n    setFiltroClinica('');\n    setFiltroMes('');\n  };\n\n  const abrirModal = (fechamento = null) => {\n    if (fechamento) {\n      setFechamentoEditando(fechamento);\n      // Formatar o valor para exibi√ß√£o\n      const valorFormatado = fechamento.valor_fechado \n        ? parseFloat(fechamento.valor_fechado).toLocaleString('pt-BR', {\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2\n          })\n        : '';\n      \n      setNovoFechamento({ \n        ...fechamento, \n        valor_formatado: valorFormatado \n      });\n    } else {\n      setFechamentoEditando(null);\n      setNovoFechamento({\n        paciente_id: '',\n        consultor_id: '',\n        clinica_id: '',\n        agendamento_id: '',\n        valor_fechado: '',\n        valor_formatado: '',\n        data_fechamento: new Date().toISOString().split('T')[0],\n        tipo_tratamento: '',\n        forma_pagamento: '',\n        observacoes: ''\n      });\n    }\n    setModalAberto(true);\n  };\n\n  const fecharModal = () => {\n    setModalAberto(false);\n    setFechamentoEditando(null);\n    setContratoSelecionado(null);\n    setNovoFechamento({\n      paciente_id: '',\n      consultor_id: '',\n      clinica_id: '',\n      agendamento_id: '',\n      valor_fechado: '',\n      valor_formatado: '',\n      data_fechamento: new Date().toISOString().split('T')[0],\n      tipo_tratamento: '',\n      forma_pagamento: '',\n      observacoes: ''\n    });\n  };\n\n  const salvarFechamento = async () => {\n    try {\n      // Validar campos obrigat√≥rios\n      if (!novoFechamento.paciente_id) {\n        alert('Por favor, selecione um paciente!');\n        return;\n      }\n      \n      if (!novoFechamento.valor_fechado || parseFloat(novoFechamento.valor_fechado) <= 0) {\n        alert('Por favor, informe um valor v√°lido!');\n        return;\n      }\n\n      // Para novos fechamentos, validar se contrato foi selecionado\n      if (!fechamentoEditando && !contratoSelecionado) {\n        alert('Por favor, selecione o contrato em PDF!');\n        return;\n      }\n\n      // Validar tipo de arquivo\n      if (contratoSelecionado && contratoSelecionado.type !== 'application/pdf') {\n        alert('Apenas arquivos PDF s√£o permitidos para o contrato!');\n        return;\n      }\n\n      // Validar tamanho do arquivo (m√°ximo 10MB)\n      if (contratoSelecionado && contratoSelecionado.size > 10 * 1024 * 1024) {\n        alert('O arquivo deve ter no m√°ximo 10MB!');\n        return;\n      }\n\n      // Preparar FormData para envio com arquivo\n      const formData = new FormData();\n      \n      // Adicionar campos do fechamento\n      formData.append('paciente_id', parseInt(novoFechamento.paciente_id));\n      \n      // S√≥ adicionar IDs se tiverem valor\n      if (novoFechamento.consultor_id && novoFechamento.consultor_id.trim() !== '') {\n        formData.append('consultor_id', parseInt(novoFechamento.consultor_id));\n      }\n      \n      if (novoFechamento.clinica_id && novoFechamento.clinica_id.trim() !== '') {\n        formData.append('clinica_id', parseInt(novoFechamento.clinica_id));\n      }\n      \n      if (novoFechamento.agendamento_id && novoFechamento.agendamento_id.trim() !== '') {\n        formData.append('agendamento_id', parseInt(novoFechamento.agendamento_id));\n      }\n      \n      formData.append('valor_fechado', parseFloat(novoFechamento.valor_fechado));\n      formData.append('data_fechamento', novoFechamento.data_fechamento);\n      formData.append('tipo_tratamento', novoFechamento.tipo_tratamento || '');\n      formData.append('forma_pagamento', novoFechamento.forma_pagamento || '');\n      formData.append('observacoes', novoFechamento.observacoes || '');\n      \n      // Adicionar arquivo se selecionado\n      if (contratoSelecionado) {\n        formData.append('contrato', contratoSelecionado);\n      }\n\n      console.log('Enviando dados com arquivo...'); // Debug\n\n      // Configurar URL base da API\n      const API_BASE_URL = process.env.REACT_APP_API_URL || \n        (process.env.NODE_ENV === 'production' \n          ? 'https://seu-backend.vercel.app/api' \n          : 'http://localhost:5000/api');\n      \n      // Enviar dados - usar fetch diretamente para FormData\n      const url = fechamentoEditando \n        ? `${API_BASE_URL}/fechamentos/${fechamentoEditando.id}`\n        : `${API_BASE_URL}/fechamentos`;\n      \n      const token = localStorage.getItem('token');\n      const response = await fetch(url, {\n        method: fechamentoEditando ? 'PUT' : 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n\n      const result = await response.json();\n      console.log('Resposta do servidor:', result); // Debug\n\n      if (response.ok) {\n        carregarDados();\n        fecharModal();\n        alert(fechamentoEditando ? 'Fechamento atualizado!' : `Fechamento registrado com sucesso! Contrato: ${result.contrato || 'anexado'}`);\n      } else {\n        alert('Erro: ' + (result.error || 'Erro desconhecido'));\n      }\n    } catch (error) {\n      console.error('Erro ao salvar fechamento:', error);\n      alert('Erro ao salvar: ' + error.message);\n    }\n  };\n\n  const excluirFechamento = async (id) => {\n    if (window.confirm('Deseja excluir este fechamento?')) {\n      try {\n        const response = await makeRequest(`/fechamentos/${id}`, {\n          method: 'DELETE'\n        });\n\n        if (response.ok) {\n          carregarDados();\n          alert('Fechamento exclu√≠do!');\n        } else {\n          const data = await response.json();\n          alert('Erro ao excluir: ' + (data.error || 'Erro desconhecido'));\n        }\n      } catch (error) {\n        console.error('Erro ao excluir fechamento:', error);\n        alert('Erro ao excluir: ' + error.message);\n      }\n    }\n  };\n\n  const formatarMoeda = (valor) => {\n    return new Intl.NumberFormat('pt-BR', {\n      style: 'currency',\n      currency: 'BRL'\n    }).format(valor);\n  };\n\n  const formatarData = (data) => {\n    return new Date(data + 'T00:00:00').toLocaleDateString('pt-BR');\n  };\n\n  // Fun√ß√£o para formatar valor como moeda durante a digita√ß√£o\n  const formatarValorInput = (valor) => {\n    // Remove tudo que n√£o √© n√∫mero\n    const numeros = valor.replace(/\\D/g, '');\n    \n    // Se n√£o h√° n√∫meros, retorna string vazia\n    if (!numeros) return '';\n    \n    // Converte para n√∫mero com 2 casas decimais\n    const numero = parseFloat(numeros) / 100;\n    \n    // Formata como moeda brasileira\n    return numero.toLocaleString('pt-BR', {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    });\n  };\n\n  // Fun√ß√£o para converter valor formatado para n√∫mero\n  const desformatarValor = (valorFormatado) => {\n    if (!valorFormatado) return '';\n    return valorFormatado.replace(/\\./g, '').replace(',', '.');\n  };\n\n  // Fun√ß√£o para lidar com mudan√ßa no campo de valor\n  const handleValorChange = (e) => {\n    const valorDigitado = e.target.value;\n    const valorFormatado = formatarValorInput(valorDigitado);\n    const valorNumerico = desformatarValor(valorFormatado);\n    \n    setNovoFechamento({\n      ...novoFechamento, \n      valor_fechado: valorNumerico,\n      valor_formatado: valorFormatado\n    });\n  };\n\n  // Mostrar loading\n  if (carregando) {\n    return (\n      <div style={{ padding: '20px', maxWidth: '1400px', margin: '0 auto' }}>\n        <div style={{ \n          textAlign: 'center', \n          padding: '60px 20px',\n          background: 'white',\n          borderRadius: '15px',\n          boxShadow: '0 4px 20px rgba(0,0,0,0.08)'\n        }}>\n          <div style={{ fontSize: '48px', marginBottom: '20px' }}>‚è≥</div>\n          <h2 style={{ color: '#6b7280', fontWeight: '500' }}>Carregando dados...</h2>\n          <p style={{ color: '#9ca3af' }}>Aguarde enquanto buscamos as informa√ß√µes</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Mostrar erro\n  if (erro) {\n    return (\n      <div style={{ padding: '20px', maxWidth: '1400px', margin: '0 auto' }}>\n        <div style={{ \n          textAlign: 'center', \n          padding: '60px 20px',\n          background: 'white',\n          borderRadius: '15px',\n          boxShadow: '0 4px 20px rgba(0,0,0,0.08)',\n          border: '1px solid #fecaca'\n        }}>\n          <div style={{ fontSize: '48px', marginBottom: '20px' }}>‚ö†Ô∏è</div>\n          <h2 style={{ color: '#dc2626', fontWeight: '600', marginBottom: '10px' }}>\n            Erro ao carregar dados\n          </h2>\n          <p style={{ color: '#6b7280', marginBottom: '20px' }}>{erro}</p>\n          <div style={{\n            background: '#fef2f2',\n            border: '1px solid #fecaca',\n            borderRadius: '8px',\n            padding: '15px',\n            marginBottom: '20px',\n            textAlign: 'left'\n          }}>\n            <h3 style={{ color: '#991b1b', fontSize: '16px', marginBottom: '10px' }}>\n              üìã Como resolver:\n            </h3>\n            <ol style={{ color: '#7f1d1d', fontSize: '14px', paddingLeft: '20px' }}>\n              <li>Acesse o <strong>Supabase</strong> (supabase.com)</li>\n              <li>V√° para <strong>SQL Editor</strong></li>\n              <li>Execute o arquivo: <code>backend/migrations/run_migrations.sql</code></li>\n              <li>Certifique-se de que a tabela <strong>fechamentos</strong> foi criada</li>\n            </ol>\n          </div>\n          <button \n            onClick={carregarDados}\n            style={{\n              background: '#3b82f6',\n              color: 'white',\n              border: 'none',\n              padding: '12px 24px',\n              borderRadius: '8px',\n              cursor: 'pointer',\n              fontWeight: '500'\n            }}\n          >\n            üîÑ Tentar Novamente\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const fechamentosFiltrados = filtrarFechamentos();\n  const stats = calcularEstatisticas();\n  const filtrosAtivos = contarFiltrosAtivos();\n\n  return (\n    <div style={{ padding: '20px', maxWidth: '1400px', margin: '0 auto' }}>\n      {/* Se√ß√£o de Estat√≠sticas */}\n      <div style={{\n        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n        borderRadius: '15px',\n        padding: '30px',\n        marginBottom: '30px',\n        boxShadow: '0 8px 32px rgba(0,0,0,0.1)',\n        color: 'white'\n      }}>\n        <div style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: '25px'\n        }}>\n          <h1 style={{ fontSize: '28px', fontWeight: '600', margin: '0' }}>üí∞ Fechamentos</h1>\n          <button \n            onClick={() => abrirModal()}\n            style={{\n              background: 'rgba(255,255,255,0.2)',\n              color: 'white',\n              border: '1px solid rgba(255,255,255,0.3)',\n              padding: '12px 24px',\n              borderRadius: '8px',\n              cursor: 'pointer',\n              fontWeight: '500',\n              transition: 'all 0.3s ease'\n            }}\n          >\n            ‚ûï Novo Fechamento\n          </button>\n        </div>\n\n        <div style={{\n          display: 'grid',\n          gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n          gap: '20px',\n          marginBottom: '20px'\n        }}>\n          <div style={{\n            background: 'rgba(255,255,255,0.15)',\n            borderRadius: '12px',\n            padding: '20px',\n            textAlign: 'center',\n            backdropFilter: 'blur(10px)',\n            border: '1px solid rgba(255,255,255,0.2)'\n          }}>\n            <span style={{ fontSize: '32px', fontWeight: '700', marginBottom: '5px', display: 'block' }}>\n              {stats.total}\n            </span>\n            <div style={{ fontSize: '14px', opacity: '0.9', fontWeight: '500' }}>\n              Total de Fechamentos\n            </div>\n          </div>\n          <div style={{\n            background: 'rgba(255,255,255,0.15)',\n            borderRadius: '12px',\n            padding: '20px',\n            textAlign: 'center',\n            backdropFilter: 'blur(10px)',\n            border: '1px solid rgba(255,255,255,0.2)'\n          }}>\n            <span style={{ fontSize: '32px', fontWeight: '700', marginBottom: '5px', display: 'block' }}>\n              {formatarMoeda(stats.valorTotal)}\n            </span>\n            <div style={{ fontSize: '14px', opacity: '0.9', fontWeight: '500' }}>\n              Valor Total\n            </div>\n          </div>\n          <div style={{\n            background: 'rgba(255,255,255,0.15)',\n            borderRadius: '12px',\n            padding: '20px',\n            textAlign: 'center',\n            backdropFilter: 'blur(10px)',\n            border: '1px solid rgba(255,255,255,0.2)'\n          }}>\n            <span style={{ fontSize: '32px', fontWeight: '700', marginBottom: '5px', display: 'block' }}>\n              {formatarMoeda(stats.ticketMedio)}\n            </span>\n            <div style={{ fontSize: '14px', opacity: '0.9', fontWeight: '500' }}>\n              Ticket M√©dio\n            </div>\n          </div>\n          <div style={{\n            background: 'rgba(255,255,255,0.15)',\n            borderRadius: '12px',\n            padding: '20px',\n            textAlign: 'center',\n            backdropFilter: 'blur(10px)',\n            border: '1px solid rgba(255,255,255,0.2)'\n          }}>\n            <span style={{ fontSize: '32px', fontWeight: '700', marginBottom: '5px', display: 'block' }}>\n              {stats.fechamentosHoje}\n            </span>\n            <div style={{ fontSize: '14px', opacity: '0.9', fontWeight: '500' }}>\n              Fechamentos Hoje\n            </div>\n          </div>\n          <div style={{\n            background: 'rgba(255,255,255,0.15)',\n            borderRadius: '12px',\n            padding: '20px',\n            textAlign: 'center',\n            backdropFilter: 'blur(10px)',\n            border: '1px solid rgba(255,255,255,0.2)'\n          }}>\n            <span style={{ fontSize: '32px', fontWeight: '700', marginBottom: '5px', display: 'block' }}>\n              {stats.fechamentosMes}\n            </span>\n            <div style={{ fontSize: '14px', opacity: '0.9', fontWeight: '500' }}>\n              Fechamentos no M√™s\n            </div>\n          </div>\n        </div>\n\n        {stats.fechamentosHoje > 0 && (\n          <div style={{\n            background: 'rgba(255, 193, 7, 0.2)',\n            border: '1px solid rgba(255, 193, 7, 0.4)',\n            borderRadius: '8px',\n            padding: '15px',\n            textAlign: 'center',\n            color: '#fff3cd',\n            fontWeight: '500'\n          }}>\n            üéâ Parab√©ns! {stats.fechamentosHoje} fechamento(s) realizado(s) hoje!\n          </div>\n        )}\n      </div>\n\n      {/* Lista de Fechamentos */}\n      <div style={{ display: 'grid', gap: '20px' }}>\n        {fechamentosFiltrados.length === 0 ? (\n          <div style={{ textAlign: 'center', padding: '60px 20px', color: '#6b7280' }}>\n            <div style={{ fontSize: '64px', marginBottom: '20px', opacity: '0.5' }}>üí∞</div>\n            <h3>Nenhum fechamento encontrado</h3>\n            <p>Registre seu primeiro fechamento para come√ßar!</p>\n          </div>\n        ) : (\n          fechamentosFiltrados.map(fechamento => (\n            <div key={fechamento.id} style={{\n              background: 'white',\n              borderRadius: '12px',\n              padding: '20px',\n              boxShadow: '0 4px 20px rgba(0,0,0,0.08)',\n              border: '1px solid #e5e7eb',\n              transition: 'all 0.3s ease'\n            }}>\n              <div style={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'flex-start',\n                marginBottom: '15px'\n              }}>\n                <div>\n                  <h3 style={{\n                    margin: '0 0 5px 0',\n                    color: '#1f2937',\n                    fontSize: '18px',\n                    fontWeight: '600'\n                  }}>\n                    {fechamento.paciente_nome}\n                  </h3>\n                  <div style={{\n                    fontSize: '24px',\n                    fontWeight: '700',\n                    color: '#059669',\n                    margin: '0'\n                  }}>\n                    {formatarMoeda(fechamento.valor_fechado)}\n                  </div>\n                </div>\n                <div style={{\n                  background: '#f3f4f6',\n                  color: '#374151',\n                  padding: '4px 12px',\n                  borderRadius: '20px',\n                  fontSize: '12px',\n                  fontWeight: '500'\n                }}>\n                  {formatarData(fechamento.data_fechamento)}\n                </div>\n              </div>\n\n              <div style={{\n                display: 'grid',\n                gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n                gap: '10px',\n                marginBottom: '15px'\n              }}>\n                <div style={{ padding: '8px 0', borderBottom: '1px solid #f3f4f6' }}>\n                  <div style={{ fontSize: '12px', color: '#6b7280', fontWeight: '500', marginBottom: '2px' }}>\n                    Consultor\n                  </div>\n                  <div style={{ fontSize: '14px', color: '#1f2937', fontWeight: '500' }}>\n                    {fechamento.consultor_nome || 'N√£o informado'}\n                  </div>\n                </div>\n                <div style={{ padding: '8px 0', borderBottom: '1px solid #f3f4f6' }}>\n                  <div style={{ fontSize: '12px', color: '#6b7280', fontWeight: '500', marginBottom: '2px' }}>\n                    Cl√≠nica\n                  </div>\n                  <div style={{ fontSize: '14px', color: '#1f2937', fontWeight: '500' }}>\n                    {fechamento.clinica_nome || 'N√£o informado'}\n                  </div>\n                </div>\n                <div style={{ padding: '8px 0', borderBottom: '1px solid #f3f4f6' }}>\n                  <div style={{ fontSize: '12px', color: '#6b7280', fontWeight: '500', marginBottom: '2px' }}>\n                    Tipo de Tratamento\n                  </div>\n                  <div style={{ fontSize: '14px', color: '#1f2937', fontWeight: '500' }}>\n                    {fechamento.tipo_tratamento || 'N√£o informado'}\n                  </div>\n                </div>\n                <div style={{ padding: '8px 0', borderBottom: '1px solid #f3f4f6' }}>\n                  <div style={{ fontSize: '12px', color: '#6b7280', fontWeight: '500', marginBottom: '2px' }}>\n                    Forma de Pagamento\n                  </div>\n                  <div style={{ fontSize: '14px', color: '#1f2937', fontWeight: '500' }}>\n                    {fechamento.forma_pagamento || 'N√£o informado'}\n                  </div>\n                </div>\n              </div>\n\n              {fechamento.observacoes && (\n                <div style={{ padding: '8px 0', borderBottom: '1px solid #f3f4f6' }}>\n                  <div style={{ fontSize: '12px', color: '#6b7280', fontWeight: '500', marginBottom: '2px' }}>\n                    Observa√ß√µes\n                  </div>\n                  <div style={{ fontSize: '14px', color: '#1f2937', fontWeight: '500' }}>\n                    {fechamento.observacoes}\n                  </div>\n                </div>\n              )}\n\n              <div style={{ display: 'flex', gap: '10px', justifyContent: 'flex-end' }}>\n                {fechamento.contrato_arquivo && (\n                  <button \n                    onClick={async () => {\n                      try {\n                        const API_BASE_URL = process.env.REACT_APP_API_URL || \n                          (process.env.NODE_ENV === 'production' \n                            ? 'https://seu-backend.vercel.app/api' \n                            : 'http://localhost:5000/api');\n                        const token = localStorage.getItem('token');\n                        const response = await fetch(`${API_BASE_URL}/fechamentos/${fechamento.id}/contrato?token=${token}`);\n                        \n                        if (!response.ok) {\n                          const errorData = await response.json();\n                          alert('Erro ao baixar contrato: ' + (errorData.error || 'Erro desconhecido'));\n                          return;\n                        }\n\n                        // Criar blob e fazer download\n                        const blob = await response.blob();\n                        const url = window.URL.createObjectURL(blob);\n                        const a = document.createElement('a');\n                        a.href = url;\n                        a.download = fechamento.contrato_nome_original || 'contrato.pdf';\n                        document.body.appendChild(a);\n                        a.click();\n                        window.URL.revokeObjectURL(url);\n                        document.body.removeChild(a);\n                      } catch (error) {\n                        console.error('Erro ao baixar contrato:', error);\n                        alert('Erro ao baixar contrato: ' + error.message);\n                      }\n                    }}\n                    style={{\n                      padding: '8px 16px',\n                      border: 'none',\n                      borderRadius: '6px',\n                      cursor: 'pointer',\n                      fontSize: '12px',\n                      fontWeight: '500',\n                      transition: 'all 0.3s ease',\n                      background: '#059669',\n                      color: 'white'\n                    }}\n                    title={`Baixar contrato: ${fechamento.contrato_nome_original || 'contrato.pdf'}`}\n                  >\n                    üìÑ Contrato\n                  </button>\n                )}\n                <button \n                  onClick={() => abrirModal(fechamento)}\n                  style={{\n                    padding: '8px 16px',\n                    border: 'none',\n                    borderRadius: '6px',\n                    cursor: 'pointer',\n                    fontSize: '12px',\n                    fontWeight: '500',\n                    transition: 'all 0.3s ease',\n                    background: '#3b82f6',\n                    color: 'white'\n                  }}\n                >\n                  ‚úèÔ∏è Editar\n                </button>\n                <button \n                  onClick={() => excluirFechamento(fechamento.id)}\n                  style={{\n                    padding: '8px 16px',\n                    border: 'none',\n                    borderRadius: '6px',\n                    cursor: 'pointer',\n                    fontSize: '12px',\n                    fontWeight: '500',\n                    transition: 'all 0.3s ease',\n                    background: '#dc2626',\n                    color: 'white'\n                  }}\n                >\n                  üóëÔ∏è Excluir\n                </button>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* Modal de Cadastro/Edi√ß√£o */}\n      {modalAberto && (\n        <div style={{\n          position: 'fixed',\n          top: '0',\n          left: '0',\n          right: '0',\n          bottom: '0',\n          background: 'rgba(0,0,0,0.5)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          zIndex: '1000'\n        }}>\n          <div style={{\n            background: 'white',\n            borderRadius: '15px',\n            padding: '30px',\n            width: '90%',\n            maxWidth: '600px',\n            maxHeight: '90vh',\n            overflowY: 'auto',\n            boxShadow: '0 20px 60px rgba(0,0,0,0.3)'\n          }}>\n            <div style={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              marginBottom: '25px',\n              paddingBottom: '15px',\n              borderBottom: '1px solid #e5e7eb'\n            }}>\n              <h2 style={{\n                fontSize: '24px',\n                fontWeight: '600',\n                color: '#1f2937',\n                margin: '0'\n              }}>\n                {fechamentoEditando ? 'Editar Fechamento' : 'Novo Fechamento'}\n              </h2>\n              <button \n                onClick={fecharModal}\n                style={{\n                  background: 'none',\n                  border: 'none',\n                  fontSize: '24px',\n                  cursor: 'pointer',\n                  color: '#6b7280',\n                  width: '32px',\n                  height: '32px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  borderRadius: '6px',\n                  transition: 'all 0.3s ease'\n                }}\n              >\n                √ó\n              </button>\n            </div>\n\n            <div style={{\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n              gap: '20px',\n              marginBottom: '25px'\n            }}>\n              <div style={{ display: 'flex', flexDirection: 'column' }}>\n                <label style={{\n                  fontWeight: '500',\n                  marginBottom: '5px',\n                  color: '#374151',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '5px'\n                }}>\n                  üë§ Paciente *\n                </label>\n                <select \n                  value={novoFechamento.paciente_id} \n                  onChange={(e) => setNovoFechamento({...novoFechamento, paciente_id: e.target.value})}\n                  required\n                  style={{\n                    padding: '10px',\n                    border: '1px solid #d1d5db',\n                    borderRadius: '6px',\n                    fontSize: '14px',\n                    transition: 'all 0.3s ease'\n                  }}\n                >\n                  <option value=\"\">Selecione um paciente</option>\n                  {pacientes.map(paciente => (\n                    <option key={paciente.id} value={paciente.id}>\n                      {paciente.nome} - {paciente.telefone}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div style={{ display: 'flex', flexDirection: 'column' }}>\n                <label style={{\n                  fontWeight: '500',\n                  marginBottom: '5px',\n                  color: '#374151',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '5px'\n                }}>\n                  üí∞ Valor Fechado *\n                </label>\n                <div style={{ position: 'relative' }}>\n                  <span style={{\n                    position: 'absolute',\n                    left: '10px',\n                    top: '50%',\n                    transform: 'translateY(-50%)',\n                    color: '#6b7280',\n                    fontSize: '14px',\n                    fontWeight: '500'\n                  }}>\n                    R$\n                  </span>\n                  <input \n                    type=\"text\" \n                    placeholder=\"0,00\"\n                    value={novoFechamento.valor_formatado || ''} \n                    onChange={handleValorChange}\n                    required\n                    style={{\n                      padding: '10px 10px 10px 35px',\n                      border: '1px solid #d1d5db',\n                      borderRadius: '6px',\n                      fontSize: '14px',\n                      transition: 'all 0.3s ease',\n                      width: '100%',\n                      boxSizing: 'border-box'\n                    }}\n                  />\n                </div>\n              </div>\n\n              <div style={{ display: 'flex', flexDirection: 'column' }}>\n                <label style={{\n                  fontWeight: '500',\n                  marginBottom: '5px',\n                  color: '#374151',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '5px'\n                }}>\n                  üë®‚Äçüíº Consultor\n                </label>\n                <select \n                  value={novoFechamento.consultor_id || ''} \n                  onChange={(e) => setNovoFechamento({...novoFechamento, consultor_id: e.target.value})}\n                  style={{\n                    padding: '10px',\n                    border: '1px solid #d1d5db',\n                    borderRadius: '6px',\n                    fontSize: '14px',\n                    transition: 'all 0.3s ease'\n                  }}\n                >\n                  <option value=\"\">Selecione um consultor</option>\n                  {consultores.map(consultor => (\n                    <option key={consultor.id} value={consultor.id}>\n                      {consultor.nome}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div style={{ display: 'flex', flexDirection: 'column' }}>\n                <label style={{\n                  fontWeight: '500',\n                  marginBottom: '5px',\n                  color: '#374151',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '5px'\n                }}>\n                  üè• Cl√≠nica\n                </label>\n                <select \n                  value={novoFechamento.clinica_id || ''} \n                  onChange={(e) => setNovoFechamento({...novoFechamento, clinica_id: e.target.value})}\n                  style={{\n                    padding: '10px',\n                    border: '1px solid #d1d5db',\n                    borderRadius: '6px',\n                    fontSize: '14px',\n                    transition: 'all 0.3s ease'\n                  }}\n                >\n                  <option value=\"\">Selecione uma cl√≠nica</option>\n                  {clinicas.map(clinica => (\n                    <option key={clinica.id} value={clinica.id}>\n                      {clinica.nome}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div style={{ display: 'flex', flexDirection: 'column' }}>\n                <label style={{\n                  fontWeight: '500',\n                  marginBottom: '5px',\n                  color: '#374151',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '5px'\n                }}>\n                  üìÖ Data do Fechamento\n                </label>\n                <input \n                  type=\"date\"\n                  value={novoFechamento.data_fechamento || ''} \n                  onChange={(e) => setNovoFechamento({...novoFechamento, data_fechamento: e.target.value})}\n                  style={{\n                    padding: '10px',\n                    border: '1px solid #d1d5db',\n                    borderRadius: '6px',\n                    fontSize: '14px',\n                    transition: 'all 0.3s ease'\n                  }}\n                />\n              </div>\n\n              <div style={{ display: 'flex', flexDirection: 'column' }}>\n                <label style={{\n                  fontWeight: '500',\n                  marginBottom: '5px',\n                  color: '#374151',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '5px'\n                }}>\n                  ü¶∑ Tipo de Tratamento\n                </label>\n                <input \n                  type=\"text\"\n                  placeholder=\"Ex: Implante, Ortodontia, Limpeza...\"\n                  value={novoFechamento.tipo_tratamento || ''} \n                  onChange={(e) => setNovoFechamento({...novoFechamento, tipo_tratamento: e.target.value})}\n                  style={{\n                    padding: '10px',\n                    border: '1px solid #d1d5db',\n                    borderRadius: '6px',\n                    fontSize: '14px',\n                    transition: 'all 0.3s ease'\n                  }}\n                />\n              </div>\n\n              <div style={{ display: 'flex', flexDirection: 'column' }}>\n                <label style={{\n                  fontWeight: '500',\n                  marginBottom: '5px',\n                  color: '#374151',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '5px'\n                }}>\n                  üí≥ Forma de Pagamento\n                </label>\n                <select \n                  value={novoFechamento.forma_pagamento || ''} \n                  onChange={(e) => setNovoFechamento({...novoFechamento, forma_pagamento: e.target.value})}\n                  style={{\n                    padding: '10px',\n                    border: '1px solid #d1d5db',\n                    borderRadius: '6px',\n                    fontSize: '14px',\n                    transition: 'all 0.3s ease'\n                  }}\n                >\n                  <option value=\"\">Selecione a forma de pagamento</option>\n                  {formasPagamento.map(forma => (\n                    <option key={forma} value={forma}>\n                      {forma}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              {/* Campo de Upload do Contrato */}\n              <div style={{ display: 'flex', flexDirection: 'column', gridColumn: '1 / -1' }}>\n                <label style={{\n                  fontWeight: '500',\n                  marginBottom: '5px',\n                  color: '#374151',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '5px'\n                }}>\n                  üìÑ Contrato (PDF) {!fechamentoEditando && <span style={{ color: '#dc2626' }}>*</span>}\n                </label>\n                \n                <div style={{\n                  border: '2px dashed #d1d5db',\n                  borderRadius: '8px',\n                  padding: '20px',\n                  textAlign: 'center',\n                  background: contratoSelecionado ? '#f0fdf4' : '#fafafa',\n                  borderColor: contratoSelecionado ? '#10b981' : '#d1d5db',\n                  transition: 'all 0.3s ease',\n                  position: 'relative'\n                }}>\n                  <input\n                    type=\"file\"\n                    accept=\".pdf\"\n                    onChange={(e) => setContratoSelecionado(e.target.files[0])}\n                    style={{\n                      position: 'absolute',\n                      top: 0,\n                      left: 0,\n                      width: '100%',\n                      height: '100%',\n                      opacity: 0,\n                      cursor: 'pointer'\n                    }}\n                  />\n                  \n                  {contratoSelecionado ? (\n                    <div>\n                      <div style={{ fontSize: '48px', marginBottom: '10px' }}>üìÑ</div>\n                      <div style={{\n                        fontSize: '14px',\n                        fontWeight: '500',\n                        color: '#059669',\n                        marginBottom: '5px'\n                      }}>\n                        Arquivo selecionado:\n                      </div>\n                      <div style={{\n                        fontSize: '13px',\n                        color: '#374151',\n                        wordBreak: 'break-all'\n                      }}>\n                        {contratoSelecionado.name}\n                      </div>\n                      <div style={{\n                        fontSize: '12px',\n                        color: '#6b7280',\n                        marginTop: '5px'\n                      }}>\n                        {(contratoSelecionado.size / 1024 / 1024).toFixed(2)} MB\n                      </div>\n                    </div>\n                  ) : (\n                    <div>\n                      <div style={{ fontSize: '48px', marginBottom: '10px', opacity: '0.5' }}>üìÑ</div>\n                      <div style={{\n                        fontSize: '14px',\n                        color: '#6b7280',\n                        marginBottom: '5px'\n                      }}>\n                        Clique aqui ou arraste para adicionar o contrato\n                      </div>\n                      <div style={{\n                        fontSize: '12px',\n                        color: '#9ca3af'\n                      }}>\n                        Apenas arquivos PDF ‚Ä¢ M√°ximo 10MB\n                      </div>\n                    </div>\n                  )}\n                </div>\n                \n                {fechamentoEditando && (\n                  <div style={{\n                    marginTop: '10px',\n                    fontSize: '12px',\n                    color: '#6b7280',\n                    textAlign: 'center'\n                  }}>\n                    üí° Para edi√ß√µes, o contrato √© opcional (manter√° o arquivo atual se n√£o for alterado)\n                  </div>\n                )}\n              </div>\n\n              <div style={{ display: 'flex', flexDirection: 'column', gridColumn: '1 / -1' }}>\n                <label style={{\n                  fontWeight: '500',\n                  marginBottom: '5px',\n                  color: '#374151',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '5px'\n                }}>\n                  üìù Observa√ß√µes\n                </label>\n                <textarea \n                  placeholder=\"Informa√ß√µes adicionais sobre o fechamento...\"\n                  value={novoFechamento.observacoes} \n                  onChange={(e) => setNovoFechamento({...novoFechamento, observacoes: e.target.value})}\n                  style={{\n                    padding: '10px',\n                    border: '1px solid #d1d5db',\n                    borderRadius: '6px',\n                    fontSize: '14px',\n                    minHeight: '80px',\n                    resize: 'vertical',\n                    fontFamily: 'inherit'\n                  }}\n                />\n              </div>\n            </div>\n\n            <div style={{\n              display: 'flex',\n              gap: '10px',\n              justifyContent: 'flex-end',\n              paddingTop: '15px',\n              borderTop: '1px solid #e5e7eb'\n            }}>\n              <button \n                onClick={fecharModal}\n                style={{\n                  padding: '12px 24px',\n                  border: 'none',\n                  borderRadius: '8px',\n                  cursor: 'pointer',\n                  fontWeight: '500',\n                  transition: 'all 0.3s ease',\n                  background: '#6b7280',\n                  color: 'white'\n                }}\n              >\n                Cancelar\n              </button>\n              <button \n                onClick={salvarFechamento}\n                style={{\n                  padding: '12px 24px',\n                  border: 'none',\n                  borderRadius: '8px',\n                  cursor: 'pointer',\n                  fontWeight: '500',\n                  transition: 'all 0.3s ease',\n                  background: '#059669',\n                  color: 'white'\n                }}\n              >\n                {fechamentoEditando ? 'Atualizar' : 'Salvar'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Fechamentos; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}